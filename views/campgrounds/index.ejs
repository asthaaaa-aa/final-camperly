<% layout('layout/boilerplate')%>
<div class="row mb-3">
    <div class="col-md-6">
        <h1>All Campgrounds</h1>
        <a href="/campgrounds/new" class="btn btn-warning mt-3 ">Add new campground</a>
    </div>
    <div class="col-md-6" id="cluster-map"></div>
           
</div>




<% campgrounds.slice(0, 7).forEach(campground => {%>
    <div class="card mb-3">
        <div class="row">
            <div class="col-md-4">
                <%if(campground.images.length) {%>
                <img class="img-fluid" src="<%=campground.images[0].url%>" alt="">
                <% }else {%>
                    <img class="img-fluid" alt=""
                        src='https://res.cloudinary.com/dbvlqytsm/image/upload/v1734162661/yelpcamp/egudcmjrgl8tw6dqma7s.jpg'>
                    <% } %>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                        <h5 class="card-title"><%= campground.title %></h5>
                        <p class="card-text"><%= campground.description%></p>
                        <p class="card-text">
                         <small class="text-muted"><%= campground.location%></small>
                        </p>
                        
                        <a href="/campgrounds/<%= campground._id %>" class="btn btn-warning">View <%= campground.title %></a>
                </div>
            </div>
        </div>
    </div>
<% }); %>

<script>
    const maptilerApiKey = '<%- process.env.MAPTILER_API_KEY %>';
    const campgrounds = { features: <%- JSON.stringify(campgrounds||[]) %>}
</script>


<script src="/javascripts/clusterMap.js"></script>